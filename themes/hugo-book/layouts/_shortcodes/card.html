{{- with .Get "href" -}}
<div><a class="book-card{{ with $.Get "class" }} {{ . }}{{ end }}" href="{{ . | safeURL }}">
{{- template "book-card-content" $ -}}
</a></div>
{{- else -}}
<div class="book-card{{ with .Get "class" }} {{ . }}{{ end }}">
{{- template "book-card-content" $ -}}
</div>
{{- end -}}

{{- define "book-card-content" -}}
{{- with .Get "image" -}}
  {{- $destination := partial "docs/links/portable-image" (dict "Page" $.Page "Destination" .) -}}
  <img src="{{ $destination | safeURL }}" />
  {{- end -}}
  <div class="markdown-inner">
{{ with .Inner }}{{ . }}{{ end -}}
  </div>
{{- end -}}
